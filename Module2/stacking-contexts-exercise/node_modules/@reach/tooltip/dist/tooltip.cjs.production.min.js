"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,n,t,o,i,r,a=require("react"),E=require("@reach/auto-id"),l=require("@reach/utils"),u=require("@reach/portal"),s=require("@reach/visually-hidden"),c=require("@reach/rect");function d(){return(d=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}).apply(this,arguments)}function f(e,n){if(null==e)return{};var t,o,i={},r=Object.keys(e);for(o=0;o<r.length;o++)n.indexOf(t=r[o])>=0||(i[t]=e[t]);return i}require("prop-types");var p,S,L={initial:"IDLE",states:(r={},r.IDLE={enter:M,on:(e={},e.MOUSE_ENTER="FOCUSED",e.FOCUS="VISIBLE",e)},r.FOCUSED={enter:function(){window.clearTimeout(p),p=window.setTimeout((function(){return U("REST")}),100)},leave:function(){window.clearTimeout(p)},on:(n={},n.MOUSE_MOVE="FOCUSED",n.MOUSE_LEAVE="IDLE",n.MOUSE_DOWN="DISMISSED",n.BLUR="IDLE",n.REST="VISIBLE",n)},r.VISIBLE={on:(t={},t.FOCUS="FOCUSED",t.MOUSE_ENTER="FOCUSED",t.MOUSE_LEAVE="LEAVING_VISIBLE",t.BLUR="LEAVING_VISIBLE",t.MOUSE_DOWN="DISMISSED",t.SELECT_WITH_KEYBOARD="DISMISSED",t.GLOBAL_MOUSE_MOVE="LEAVING_VISIBLE",t)},r.LEAVING_VISIBLE={enter:function(){window.clearTimeout(S),S=window.setTimeout((function(){return U("TIME_COMPLETE")}),500)},leave:function(){window.clearTimeout(S),M()},on:(o={},o.MOUSE_ENTER="VISIBLE",o.FOCUS="VISIBLE",o.TIME_COMPLETE="IDLE",o)},r.DISMISSED={leave:function(){I.id=null},on:(i={},i.MOUSE_LEAVE="IDLE",i.BLUR="IDLE",i)},r)},I={id:null},O=L.initial,v=[];function M(){I.id=null}function w(e){var n=void 0===e?{}:e,t=n.onMouseEnter,o=n.onMouseMove,i=n.onMouseLeave,r=n.onFocus,u=n.onBlur,s=n.onKeyDown,d=n.onMouseDown,f=n.ref,p=n.DEBUG_STYLE,S=String(E.useId(n.id)),L=a.useState(!!p||null!==S&&I.id===S&&"VISIBLE"===O),M=L[0],w=L[1],D=a.useRef(null),_=l.useForkedRef(f,D),b=c.useRect(D,{observe:M});return a.useEffect((function(){return v.push(e=function(){w(I.id===S&&("VISIBLE"===O||"LEAVING_VISIBLE"===O))}),function(){v.splice(v.indexOf(e),1)};var e}),[S]),l.useCheckStyles("tooltip"),a.useEffect((function(){var e=l.getOwnerDocument(D.current);function n(e){"Escape"!==e.key&&"Esc"!==e.key||"VISIBLE"!==O||U("SELECT_WITH_KEYBOARD")}return e.addEventListener("keydown",n),function(){return e.removeEventListener("keydown",n)}}),[]),[{"aria-describedby":M?l.makeId("tooltip",S):void 0,"data-reach-tooltip-trigger":"",ref:_,onMouseEnter:l.wrapEvent(t,(function(){U("MOUSE_ENTER",{id:S})})),onMouseMove:l.wrapEvent(o,(function(){U("MOUSE_MOVE",{id:S})})),onFocus:l.wrapEvent(r,(function(){window.__REACH_DISABLE_TOOLTIPS||U("FOCUS",{id:S})})),onBlur:l.wrapEvent(u,(function(){I.id===S&&U("BLUR")})),onMouseLeave:l.wrapEvent(i,(function(){U("MOUSE_LEAVE")})),onKeyDown:l.wrapEvent(s,(function(e){"Enter"!==e.key&&" "!==e.key||U("SELECT_WITH_KEYBOARD")})),onMouseDown:l.wrapEvent(d,(function(){I.id===S&&U("MOUSE_DOWN")}))},{id:S,triggerRect:b,isVisible:M},M]}var D=l.forwardRefWithAs((function(e,n){var t=e.children,o=e.label,i=e.ariaLabel,r=e.id,E=e.DEBUG_STYLE,l=f(e,["children","label","ariaLabel","id","DEBUG_STYLE"]),u=a.Children.only(t),s=w({id:r,onMouseEnter:u.props.onMouseEnter,onMouseMove:u.props.onMouseMove,onMouseLeave:u.props.onMouseLeave,onFocus:u.props.onFocus,onBlur:u.props.onBlur,onKeyDown:u.props.onKeyDown,onMouseDown:u.props.onMouseDown,ref:u.ref,DEBUG_STYLE:E}),c=s[1];return a.createElement(a.Fragment,null,a.cloneElement(u,s[0]),a.createElement(_,Object.assign({ref:n,label:o,"aria-label":i},c,l)))})),_=l.forwardRefWithAs((function(e,n){var t=e.label,o=e.ariaLabel,i=e.isVisible,r=e.id,E=f(e,["label","ariaLabel","isVisible","id"]);return i?a.createElement(u.Portal,null,a.createElement(b,Object.assign({ref:n,label:t,"aria-label":o,isVisible:i},E,{id:l.makeId("tooltip",String(r))}))):null})),b=l.forwardRefWithAs((function(e,n){var t=e.ariaLabel,o=e["aria-label"],i=e.as,r=void 0===i?"div":i,E=e.id,u=e.isVisible,p=e.label,S=e.position,L=void 0===S?T:S,I=e.style,O=e.triggerRect,v=f(e,["ariaLabel","aria-label","as","id","isVisible","label","position","style","triggerRect"]),M=null!=(o||t),w=a.useRef(null),D=l.useForkedRef(n,w),_=c.useRect(w,{observe:u});return a.createElement(a.Fragment,null,a.createElement(r,Object.assign({role:M?void 0:"tooltip"},v,{ref:D,"data-reach-tooltip":"",id:M?void 0:E,style:d({},I,h(L,O,_))}),p),M&&a.createElement(s.VisuallyHidden,{role:"tooltip",id:E},o||t))}));function h(e,n,t){return t?e(n,t):{visibility:"hidden"}}var T=function(e,n){var t=l.getDocumentDimensions();return e&&n?{left:t.width<e.left+n.width&&!(e.left-n.width<0)?e.right-n.width+window.pageXOffset+"px":e.left+window.pageXOffset+"px",top:t.height<e.bottom+n.height+8&&!(e.top-n.height<0)?e.top-8-n.height+window.pageYOffset+"px":e.top+8+e.height+window.pageYOffset+"px"}:{}},U=function(e,n){var t=L.states[O],o=t&&t.on&&t.on[e];if(o){t&&t.leave&&t.leave(),n&&(I=n);var i=L.states[o];i&&i.enter&&i.enter(),O=o,v.forEach((function(e){return e(O,I)}))}};exports.LEAVE_TIMEOUT=500,exports.MOUSE_REST_TIMEOUT=100,exports.Tooltip=D,exports.TooltipPopup=_,exports.default=D,exports.useTooltip=w;
//# sourceMappingURL=tooltip.cjs.production.min.js.map
